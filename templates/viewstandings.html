{% extends "layout.html" %}
{% from '_formhelpers.html' import num,tabbool,tabboollink,tabeditlink %}
{% block pagename %}
    Standings
{% endblock %}
{% block scripts %}
  <script type="text/javascript">
    $( document ).ready( function() {
      viewstandings(); 
    })
  </script>
{% endblock %}
{% block body %}
  <div id="_rrwebapp-heading-elements">
    <div class="TextLeft W7emLabel">
      <div><label class="Label">Division:</label><span id="_rrwebapp_filterdivision"></span>
        <span style="float: right"><button id="_rrwebapp-button-standings-legend">Legend</button></span></div>
      <div><label class="Label">Gender:</label><span id="_rrwebapp_filtergender"></span></div>
    </div>
    <br>
    <div class="_rrwebapp-table-header" id="_rrwebapp-standings-header">
      {{ description }}
    </div>
    <div id="_rrwebapp-accordion-standings-races">
      <h3 id="_rrwebapp-accordion-standings-races-header"><a >Races</a></h3>
      <div>
        <table class="DataList" id="_rrwebapp-table-standings-races" cellpadding=0 cellspace=0>
          <tbody>
            {% for racerow in racerows %}
              <tr>
                {% for race in racerow %}
                  <td align=center>{{ num(race.num,0) }}</td>
                  {% if race.resultsurl %}
                    <td><a href="{{ race.resultsurl}}">{{race.race}}</a></td>
                  {% else %}
                    <td>{{race.race}}</td>
                  {% endif %}
                {% endfor %}
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <br>
  </div>
  <table class="DataList" id="_rrwebapp-table-standings" cellpadding=0 cellspace=0>
    <thead>
      <tr>
        {% for heading,cclass,tooltip in headingdata %}
          <th {% if tooltip%}title="{{tooltip}}"{% endif %} class="{{ cclass}}">{{ heading|safe }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for standing in standings %}
        <tr>
          {% for field in standing %}
            <td>{{ field|safe }}</td>
          {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}