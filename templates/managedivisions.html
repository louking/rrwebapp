{% extends "layout.html" %}
{% from '_formhelpers.html' import render_field,widget_field,tabnum,tabbool,tabeditlink %}
{% block pagename %}
    Divisions
{% endblock %}
{% block scripts %}
  <script type="text/javascript">$( document ).ready( function() {
    {% if writeallowed %}
      addbutton.init('add-division',
                     '{{ url_for('divisionsettings',divisionid=0) }}'
                     );
      toolbutton.init('copy-division',
            '\
            <h3>Copy Divisions</h3>\
            <div>\
              <form id="copy-divisions" method="post" enctype="multipart/form-data">\
                {{ widget_field(form.copyyear) }}\
                <button id="managedivisions-copy-button">Copy</button>\
              </form>\
            </div>\
      ');
    {% endif %}

    managedivisions();

    {% if writeallowed %}
      toolbutton.position({my: "left center", at: "right+3 center", of: addbutton.selector});
    {% endif %}
  })
  </script>
{% endblock %}
{% block body %}
  <div id="_rrwebapp-heading-elements">
  </div>
  <table class='' id='_rrwebapp-table-manage-divisions' cellpadding=0 cellspace=0>
    <thead>
      <tr>
        {% if writeallowed %}
        <th align=center>Edit</th>
        {% endif %}
        <th>Series</td>
        <th align=center>Low Age</th>
        <th align=center>High Age</th>
      </tr>
    </thead>
    <tbody>
      {% for dd in divisions %}
        <tr>
          {% if writeallowed %}
            {{ tabeditlink(url_for('divisionsettings',divisionid=dd.id)) }}
          {% endif %}
          <td>{{ dd.series.name }}</td>
          {{ tabnum(dd.divisionlow,0) }}
          {{ tabnum(dd.divisionhigh,0) }}
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}